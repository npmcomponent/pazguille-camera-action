(function(a){"use strict";function f(a,b){return this.init(a,b),this}var b=a.navigator,c=a.document,d=a.URL||a.webkitURL||a.mozURL||a.msURL,e={mandatory:{minWidth:"1280",minHeight:"720"}};b.getUserMedia=b.getUserMedia||b.webkitGetUserMedia||b.mozGetUserMedia||b.msGetUserMedia,f.prototype.init=function(a,b){return b=b||{},b.hd=void 0!==b.hd?b.hd:!1,b.width=b.width||320,b.height=b.height||240,this.el=a,this.width=b.width,this.height=b.height,this._constraints=b.hd?e:!0,this._canvas=c.createElement("canvas"),this._createVideo(),this},f.prototype._createVideo=function(){var a=c.createElement("video");return a.autoplay="autoplay",a.width=this.width,a.height=this.height,this._video=a,this},f.prototype.action=function(){var a=this;return void 0!==this._stream?this._video.play():(this.el.appendChild(this._video),b.getUserMedia({video:this._constraints,audio:!1},function(b){a._success(b)},function(){a._fail()})),this},f.prototype._success=function(a){return this._video.src=d?d.createObjectURL(a):a,this._video.play(),this._stream=a,this},f.prototype._fail=function(){return a.console.log("Your browser doesn't support this feature."),this},f.prototype.pause=function(){return this._video.pause(),this},f.prototype.cut=function(){return this._video.src="",this._stream.stop(),this._stream=void 0,this.el.removeChild(this._video),this},f.prototype.takePhoto=function(a){var b;return a=a||{},a.type=a.type||"image/png",a.width=this._canvas.width=a.width||this.width,a.height=this._canvas.height=a.height||this.height,a.download=void 0!==a.download?a.download:!1,this._canvas.getContext("2d").drawImage(this._video,0,0,a.width,a.height),b=this._canvas.toDataURL(a.type,a.jpegquality),a.download&&(c.location.href=b.replace(a.type,"image/octet-stream")),b},exports=module.exports=f})(this);